@page "/addresses"
@rendermode InteractiveServer

@using BlazorApp.DA;
@using BlazorApp.Enums;
@using BlazorBootstrap;
@using BlazorApp.Components; <!-- Replace with the actual namespace containing GridColumns -->

@inject IAddressPriorityDataAccess addressPriorityDataAccess;

<Grid TItem="AddressPriority" Class="table table-bordered table-striped" DataProvider="@AddressesDataProvider"
     AllowPaging="true" PageSize="10" AllowFiltering="true" Responsive="true">


        <GridColumn TItem="AddressPriority" HeaderText="Вулиця" PropertyName="streetName"
            SortKeySelector="item => item.address.streetName">
            @context.address.streetName
        </GridColumn>
        <GridColumn TItem="AddressPriority" HeaderText="Будинок" PropertyName="building"
            SortKeySelector="item => item.address.building">
            @context.address.building
        </GridColumn>
        <GridColumn TItem="AddressPriority" HeaderText="Пріорітет" PropertyName="priority">
            <PriorityInputComponent addressId="context.addressId" priority="context.priority" />
        </GridColumn>

</Grid>


@code {

    private async Task<GridDataProviderResult<AddressPriority>>
    AddressesDataProvider(GridDataProviderRequest<AddressPriority> request)
    {
        List<AddressPriority> addresses = await addressPriorityDataAccess.GetAddressPriorities();
        return await Task.FromResult(request.ApplyTo(addresses));
    }

}
