@using System.ComponentModel.DataAnnotations;
@using BlazorApp.DA;


@inject IDaoBase<AddressAlias, AddressAliasModel> addressAliasDataAccess;
@inject ILogger<AliasInputComponent> _logger;

<InputText TValue="double" Label="Укр. назва" @bind-Value="@alias" @bind-Value:after="UpdateDbData" />



@code {
    [Parameter] public int addressId { get; set; }

    [Parameter] public string alias { get; set; } = "";
 
    [Parameter] public bool streetAlias { get; set; }

    private async Task UpdateDbData()
    {
        _logger.LogInformation($"Updating alias for address with id {addressId} to {alias}");

        AddressAlias addressAlias = await addressAliasDataAccess.GetById(addressId);

        if(streetAlias) addressAlias.streetAlias = alias;
        else addressAlias.buildingAlias = alias;
        
        await addressAliasDataAccess.Update(addressAlias, addressId);
    }
}  