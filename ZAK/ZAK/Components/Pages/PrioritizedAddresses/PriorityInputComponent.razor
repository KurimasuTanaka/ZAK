@using System.ComponentModel.DataAnnotations;
@using BlazorApp.DA;


@inject IDaoBase<Address, AddressModel> addressDataAccess;
@inject ILogger<PriorityInputComponent> _logger;


<NumberInput TValue="double" Label="Приорітет" @bind-Value="@priority" @bind-Value:after="UpdateDbData" />



@code {
    [Parameter] public int addressId { get; set; }

    [Parameter] public double priority { get; set; }
 
    private async Task UpdateDbData()
    {
        _logger.LogInformation($"Updating priority for address with id {addressId} to {priority}");

        Address address = await addressDataAccess.GetById(addressId);
        address.priority = priority;        
        await addressDataAccess.Update(address, addressId);
    }
}
